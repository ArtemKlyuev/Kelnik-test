"use strict";window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(t,e){e=e||window;for(var s=0;s<this.length;s++)t.call(e,this[s],s,this)});var scrollToTop=function(){var t=document.querySelector(".scroll-up-btn");window.addEventListener("scroll",function(){100<window.pageYOffset?t.classList.add("js-visible"):t.classList.remove("js-visible")}),t.addEventListener("click",function t(){0<window.pageYOffset&&(window.scrollBy(0,-50),setTimeout(t,10))})};scrollToTop();var addToFav=function(){var t=document.querySelectorAll(".apartment-card__star"),e=function(){this.classList.toggle("apartment-card__star_favorite")};t.forEach(function(t){return t.addEventListener("click",e)})};addToFav();var sortingCards=function(){var n=document.querySelectorAll(".results__switcher"),o=0,i=0;n[0].addEventListener("click",function(){var e=document.querySelector(".results__cards"),t=document.querySelectorAll(".apartment-card"),s=[];for(var r in o++,t)1===t[r].nodeType&&s.push(t[r]);s.sort(function(t,e){return o%2?+t.children[4].textContent.split(" ").slice(0,3).join("")==+e.children[4].textContent.split(" ").slice(0,3).join("")?0:+t.children[4].textContent.split(" ").slice(0,3).join("")>+e.children[4].textContent.split(" ").slice(0,3).join("")?-1:1:+t.children[4].textContent.split(" ").slice(0,3).join("")==+e.children[4].textContent.split(" ").slice(0,3).join("")?0:+t.children[4].textContent.split(" ").slice(0,3).join("")>+e.children[4].textContent.split(" ").slice(0,3).join("")?1:-1}),s.forEach(function(t){return e.appendChild(t)}),this.classList.toggle("results__switcher_descending"),!this.classList.contains("js-selected")&&this.classList.add("js-selected"),n[1].classList.remove("js-selected")}),n[1].addEventListener("click",function(){var e=document.querySelector(".results__cards"),t=document.querySelectorAll(".apartment-card"),s=[];for(var r in i++,t)1===t[r].nodeType&&s.push(t[r]);s.sort(function(t,e){return i%2?+t.getAttribute("data-rooms")==+e.getAttribute("data-rooms")?0:+t.getAttribute("data-rooms")>+e.getAttribute("data-rooms")?-1:1:+t.getAttribute("data-rooms")==+e.getAttribute("data-rooms")?0:+t.getAttribute("data-rooms")>+e.getAttribute("data-rooms")?1:-1}),s.forEach(function(t){return e.appendChild(t)}),this.classList.toggle("results__switcher_descending"),!this.classList.contains("js-selected")&&this.classList.add("js-selected"),n[0].classList.remove("js-selected")})};sortingCards();var showMoreCards=function(){var t=document.querySelector(".results__btn-show"),e=function(t){if(200<=t.status&&t.status<300)return t;var e=new Error(t.statusText);throw e.response=t,e},s=document.querySelector(".results__error");t.addEventListener("click",function(){fetch("fetching_data/fetching_data.html").then(e).then(function(t){return t.text()}).then(function(t){s.classList.remove("js-visible"),s.textContent="",document.querySelector(".results__cards").innerHTML+=t,addToFav()}).catch(function(t){s.classList.add("js-visible"),s.textContent="Ошибка при получении данных",console.error(t)})})};showMoreCards();var mobileMenu=function(){document.querySelector(".menu-burger").addEventListener("click",function(){var t=document.querySelector(".header");t.classList.contains("js-menu-open")?(t.classList.add("js-menu-closed"),t.classList.remove("js-menu-open")):(t.classList.add("js-menu-open"),t.classList.remove("js-menu-closed"))})};mobileMenu();var formValidation=function(){document.querySelector(".form-subscribe").addEventListener("submit",function(t){var e=document.querySelector(".form-subscribe__checkbox").checked,s=document.querySelector(".form-subscribe__checkbox-error"),r=document.querySelector(".form-subscribe__email").value,n=/^[a-z]+@[a-z]+\.[a-z]+$/i,o=document.querySelector(".form-subscribe__email-error");if(!n.test(r)||!e)return n.test(r)?(o.textContent="",s.textContent="Подтвердите подписку",s.classList.add("js-visible")):(s.textContent="",o.textContent="Вы ввели неправильный E-mail",o.classList.add("js-visible")),t.preventDefault(),!1;o.textContent="",o.classList.remove("js-visible"),s.textContent="",s.classList.remove("js-visible")})};formValidation();